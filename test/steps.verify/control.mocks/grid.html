<!DOCTYPE html>
<html>
<head>
    <title>Cucumber TDD Mock Page - Grid</title>
    <meta charset="UTF-8">
    <title>API Manager - Informatica Cloud</title>
    <link rel="icon" type="image/png" href="res/img/favicon.png">
    <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="res/img/favicon.png">
    <link rel="stylesheet" href="lib/symphony/css/symphony-core-3.2.0.css">
    <link rel="stylesheet" href="lib/symphony/css/symphony-widgets-3.2.0.css">
    <link rel="stylesheet" href="lib/symphony/css/symphony-webShell-3.2.0.css">
    <link rel="stylesheet" href="lib/symphony/css/symphony-library-3.2.0.css">
    <link rel="stylesheet" href="res/css/app.css">
    <!-- bower:js -->
    <script src="vendor/jquery.min.js"></script>
    <script src="vendor/bootstrap.js"></script>
    <script src="vendor/moment-with-locales.min.js"></script>
    <script src="vendor/angular.min.js"></script>
    <script src="vendor/angular-ui-router.min.js"></script>
    <script src="vendor/ui-bootstrap.min.js"></script>
    <script src="vendor/angular-message-format.min.js"></script>
    <script src="vendor/angular-translate.js"></script>
    <script src="vendor/angular-validation.js"></script>
    <!-- endbower -->
    <!-- inject:js -->
    <script src="lib/symphony/js/symphony-core-3.2.0.js"></script>
    <script src="lib/symphony/js/symphony-widgets-3.2.0.js"></script>
    <script src="lib/symphony/js/symphony-webShell-3.2.0.js"></script>
    <script src="lib/symphony/js/symphony-library-3.2.0.js"></script>
    <script src="lib/symphony/js/symphony-angular-3.2.0.js"></script>
    <script src="lib/goog/base.js"></script>
    <script src="lib/goog/deps.js"></script>
    <script src="lib/angular-ipv4-input/ipv4.input.js"></script>
    <script src="lib/base64/angular-base64.min.js"></script>
    <script src="rest/schema/API/Client/ApiError.js"></script>
    <script src="rest/schema/API/Client/ApiErrorArrayItem.js"></script>
    <script src="rest/schema/API/Client/ApiPolicies.js"></script>
    <script src="rest/schema/API/Client/AuditEntry.js"></script>
    <script src="rest/schema/API/Client/BuildInfo.js"></script>
    <script src="rest/schema/API/Client/DefaultApi.js"></script>
    <script src="rest/schema/API/Client/ExposedApi.js"></script>
    <script src="rest/schema/API/Client/ManagedApiState.js"></script>
    <script src="rest/schema/API/Client/OrgContact.js"></script>
    <script src="rest/schema/API/Client/OrgDetails.js"></script>
    <script src="rest/schema/API/Client/OrgId.js"></script>
    <script src="rest/schema/API/Client/OrgInfo.js"></script>
    <script src="rest/schema/API/Client/OrgPolicies.js"></script>
    <script src="rest/schema/API/Client/PolicyAuthentication.js"></script>
    <script src="rest/schema/API/Client/PolicyIpFilter.js"></script>
    <script src="rest/schema/API/Client/PolicyRateLimit.js"></script>
    <script src="rest/schema/API/Client/ProviderApi.js"></script>
    <script src="rest/schema/API/Client/SecurityEvent.js"></script>
    <script src="rest/schema/API/Client/ServiceApi.js"></script>
    <script src="rest/mocked/server/sinon.js"></script>
    <script src="rest/mocked/server/server.js"></script>
    <script src="rest/mocked/api/deactivate.js"></script>
    <script src="rest/mocked/api/services.js"></script>
    <script src="rest/mocked/log/security.js"></script>
    <script src="rest/mocked/auth/login.js"></script>
    <script src="rest/mocked/policys/ipfilter.js"></script>
    <script src="rest/mocked/policys/policys.js"></script>
    <script src="rest/mocked/policys/ratelimit.js"></script>
    <script src="src/components/workspaces/settings/module.js"></script>
    <script src="src/components/workspaces/policies/module.js"></script>
    <script src="src/components/workspaces/logs/module.js"></script>
    <script src="src/components/workspaces/apis/module.js"></script>
    <script src="src/components/workspaces/module.js"></script>
    <script src="src/components/logout/module.js"></script>
    <script src="src/components/header/module.js"></script>
    <script src="src/components/login/module.js"></script>
    <script src="src/directives/module.js"></script>
    <script src="src/directives/infa-tile-custom.js"></script>
    <script src="src/directives/infa-panel-tool-item.js"></script>
    <script src="src/directives/infa-login.js"></script>
    <script src="src/directives/confirm-on-exit.js"></script>
    <script src="src/directives/apim-ui-tabs.js"></script>
    <script src="src/directives/apim-ui-grid.spec.mock.js"></script>
    <script src="src/directives/apim-ui-grid.js"></script>
    <script src="src/directives/apim-ui-date-picker.js"></script>
    <script src="src/directives/apim-i18n.js"></script>
    <script src="src/directives/apim-bo-inject.js"></script>
    <script src="src/utils/copy-to-clipboard.js"></script>
    <script src="src/services/validation.js"></script>
    <script src="src/services/module.js"></script>
    <script src="src/services/i18n.js"></script>
    <script src="src/services/dialogs.js"></script>
    <script src="src/services/bo-inject.js"></script>
    <script src="src/services/backend.js"></script>
    <script src="src/services/auth.js"></script>
    <script src="src/factorys/messages.js"></script>
    <script src="src/app-module.js"></script>
    <script src="src/factorys/loading.js"></script>
    <script src="src/components/module.js"></script>
    <script src="src/constants.js"></script>
    <script src="src/app.js"></script>
</head>
<body style="height: 800px;padding: 5%;background-color: #ffffee;">
<script>
    window.symphonyResourcePath = 'lib/symphony'
    $(function () {
        function getSampleObjs(options) {
            var objs = [{
                    name: "Test1",
                    type: "Type1"
                }, {
                    name: "Test2",
                    type: "Type2"
                }, {
                    name: "Test3",
                    type: "Type3"
                }, {
                    name: "Test4",
                    type: "Type4"
                }, {
                    name: "Test5",
                    type: "Type5"
                }, {
                    name: "Test6",
                    type: "Type6"
                }],
                found = [];

            if (options && options.findText) {
                $.each(objs, function (i, obj) {
                    var label = obj.name.toLowerCase(),
                        findText = options.findText.toLowerCase();
                    if (label.indexOf(findText) > -1)
                        found.push(obj);
                });
            } else {
                found = objs;
            }

            if (options && options.sortBy) {
                console.log(options.sortBy);

                if (!options.ascending)
                    found = found.reverse();
            }

            return found;
        }

        var rowModel = {
            getRootObjects: function (opts) {
                return getSampleObjs(opts);
            },
            getTotalUnfilteredCount: function () {
                return getSampleObjs().length;
            },
            getId: function (obj) {
                return obj.name;
            }
        };

        var actionsProvider = {

            getActions: function () {
                return [{
                    id: 'singleBulk',
                    label: 'Single Item/Bulk Action',
                    type: 'push',
                    handler: {
                        execute: function (rowObjs) {

                            var result = '';

                            if (rowObjs) {
                                if ($.isArray(rowObjs)) {
                                    for (var i = 0; i < rowObjs.length; i++)
                                        result = result + '\n' + rowObjs[i].name;
                                } else {
                                    result += rowObjs.name;
                                }

                            }
                            alert(result);
                        },
                        isVisible: function (rowObj) {
                            return true;
                        },
                        isEnabled: function (rowObj) {
                            return true;
                        }
                    }
                }, {
                    id: 'singleItem',
                    label: 'Single Item Action',
                    type: 'push',
                    handler: {
                        execute: function (rowObj) {
                            if (rowObj)
                                alert(rowObj.name);
                        },
                        isVisible: function (rowObj) {
                            return !$.isArray(rowObj)
                        },
                        isEnabled: function (rowObj) {
                            return true;
                        }
                    }
                }, {
                    id: 'bulkAction',
                    label: 'Bulk Action',
                    type: 'push',
                    handler: {
                        execute: function (rowObjs) {
                            var result = '';
                            for (var i = 0; i < rowObjs.length; i++)
                                result = result + '\n' + rowObjs[i].name;
                            alert(result);
                        },
                        isVisible: function (rowObj) {
                            return $.isArray(rowObj);
                        },
                        isEnabled: function (rowObj) {
                            return true;
                        }
                    }
                }];
            }
        };

        this.$demoGrid = $('#infatable-example');

        //Create infaTable
        this.$demoGrid = this.$demoGrid.infaTable({
            title: "infaTable Demo",
            rowModel: rowModel,
            actionsProvider: actionsProvider,
            columnInfo: [{
                name: 'name',
                label: 'Name',
                sortable: true
            }, {
                name: 'type',
                label: 'Type'
            }],
            sortable: true,
            checkboxes: true,
            hasContextMenu: true, //Context Menu
            menuId: 'exampleMenu',
            actionsMenuColumn: true,
            hasFind: true,
            sortOptions: [{
                id: 'name',
                label: 'Name'
            }]
        });
        var table = $.getWidget(this.$demoGrid, 'infaTable');
    });
</script>

<div style="height: 100%;background-color: white;padding: 1%;   ">
    <div data-bo="test-grid" id="infatable-example" style="height: 100%"></div>
</div>
</body>
</html>
